# API Testing Guide - cURL Commands

Use these commands to test your application. You can import these directly into Postman by clicking **Import** -> **Raw Text** and pasting the cURL command.

> **IMPORTANT**: After logging in, copy the `token` from the response and replace `YOUR_JWT_TOKEN` in the subsequent requests.

## 1. Authentication

### Register a New Patient
```bash
curl --location 'http://localhost:8080/api/auth/register' \
--header 'Content-Type: application/json' \
--data '{
    "name": "John Doe",
    "email": "john@example.com",
    "phone": "+1234567890",
    "password": "password123",
    "role": "PATIENT"
}'
```

### Register a Caregiver
```bash
curl --location 'http://localhost:8080/api/auth/register' \
--header 'Content-Type: application/json' \
--data '{
    "name": "Jane Nurse",
    "email": "jane@example.com",
    "phone": "+9876543210",
    "password": "password123",
    "role": "CAREGIVER"
}'
```

### Login
```bash
curl --location 'http://localhost:8080/api/auth/login' \
--header 'Content-Type: application/json' \
--data '{
    "email": "john@example.com",
    "password": "password123"
}'
```
*Response will contain the JWT Token.*

---

## 2. Medicine Management (Requires Token)

### Add a Medicine
```bash
curl --location 'http://localhost:8080/api/medicine/add' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer YOUR_JWT_TOKEN' \
--data '{
    "medicineName": "Paracetamol",
    "dosageQty": "500mg",
    "beforeFood": true,
    "startDate": "2024-01-01",
    "endDate": "2024-12-31",
    "scheduleTimes": ["08:00:00", "14:00:00", "20:00:00"]
}'
```

### Get My Medicines
```bash
curl --location 'http://localhost:8080/api/medicine/myMedicines' \
--header 'Authorization: Bearer YOUR_JWT_TOKEN'
```

### Delete a Medicine
*Replace `1` with the actual ID returned from "Get My Medicines".*
```bash
curl --location --request DELETE 'http://localhost:8080/api/medicine/delete/1' \
--header 'Authorization: Bearer YOUR_JWT_TOKEN'
```

---

## 3. Dose Management

### Mark Dose as Taken
*You need a valid `doseLogId`. Since these are generated by the scheduler, you might not have one immediately unless the scheduler ran. You can check the database `dose_logs` table or wait for the scheduler.*
```bash
curl --location --request POST 'http://localhost:8080/api/dose/taken/1' \
--header 'Authorization: Bearer YOUR_JWT_TOKEN'
```

### Mark Dose as Missed
```bash
curl --location --request POST 'http://localhost:8080/api/dose/missed/1' \
--header 'Authorization: Bearer YOUR_JWT_TOKEN'
```

---

## 4. Caregiver Features

### Add Patient (Run this as CAREGIVER)
```bash
curl --location 'http://localhost:8080/api/caregiver/add' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer YOUR_CAREGIVER_JWT_TOKEN' \
--data '{
    "email": "john@example.com"
}'
```

### Get My Patients (Run this as CAREGIVER)
```bash
curl --location 'http://localhost:8080/api/caregiver/patients' \
--header 'Authorization: Bearer YOUR_CAREGIVER_JWT_TOKEN'
```

---

## 5. Reports

### Get Today's Report
```bash
curl --location 'http://localhost:8080/api/report/today' \
--header 'Authorization: Bearer YOUR_JWT_TOKEN'
```
